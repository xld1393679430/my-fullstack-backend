(this.webpackJsonpfullstackopen=this.webpackJsonpfullstackopen||[]).push([[0],{178:function(e,t,n){},198:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(26),s=n.n(a),o=n(44),i=n(35),u=(n(178),n(23)),l=n.n(u),j=n(28),d=n(45),b=n(274),p=n(72),h=n(25),O=n(86),f=n.n(O),x="/api/notes",v=null,m={getNotes:function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(x).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNote:function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,f.a.post(x,t,n).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNote:function(){var e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(x,"/").concat(t),n).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){v="bearer ".concat(e)}},g=n(7),y=function(){Object(i.c)((function(e){return e})).notes;var e=Object(h.h)().id;return Object(g.jsxs)("div",{children:["note id: ",e]})},k=n(55),w=n(275),N=n(278),T=Object(r.forwardRef)((function(e,t){var n=e.buttonLabel,c=e.children,a=Object(r.useState)(!1),s=Object(d.a)(a,2),o=s[0],i=s[1],u={display:o?"none":""},l={display:o?"":"none"},j=function(){i(!o)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:j}})),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:u,children:Object(g.jsx)(k.a,{onClick:j,children:n})}),Object(g.jsxs)("div",{style:l,children:[c,Object(g.jsx)(k.a,{style:{marginTop:10},onClick:j,children:"cancel"})]})]})}));T.displayName="Toggleable";var I=T,C=n(277),S=n(168),L=function(e){var t=e.createNote,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1];return Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault(),t({content:a,important:!0}),s("")},children:Object(g.jsx)(C.a,{style:{maxWidth:420},size:"middle",placeholder:"\u8bf7\u8f93\u5165",value:a,addonAfter:Object(g.jsx)(k.a,{style:{height:30},htmlType:"submit",type:"text",icon:Object(g.jsx)(S.a,{}),children:"\u63d0\u4ea4"}),onChange:function(e){s(e.target.value)}})})},E=n(129),A=n(163),U=function(e,t){return function(){var n=Object(j.a)(l.a.mark((function n(r){var c,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c="addNoteMessageKey",A.b.loading({content:"\u6dfb\u52a0\u4e2d...",key:c}),n.prev=2,n.next=5,m.createNote(e);case 5:a=n.sent,A.b.success({content:"\u6dfb\u52a0\u6210\u529f",key:c}),r({type:"NEW_NOTE",data:a}),t.current.toggleVisibility(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),A.b.error({content:"\u6dfb\u52a0\u5931\u8d25",key:c});case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},G=function(e){return function(){var t=Object(j.a)(l.a.mark((function t(n,r){var c,a,s,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=r(),a=c.notes,s=a.find((function(t){return t.id===e})),o=Object(E.a)(Object(E.a)({},s),{},{important:!s.important}),t.next=5,m.updateNote(e,o);case 5:i=t.sent,u=a.map((function(t){return t.id===e?i:t})),n({type:"TOGGLE_IMPORTANCE",data:u});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},D=(n(198),function(e){var t=e.showAll,n=e.handleToggleShowAll,c=Object(i.c)((function(e){return e})),a=c.notes,s=c.user,u=Object(r.useRef)(),d=Object(i.b)(),b=t?a:a.filter((function(e){return e.important}));b=[].concat(b).reverse();var p=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(U(t,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=[{title:"id",dataIndex:"id",key:"id"},{title:"content",dataIndex:"content",key:"content",render:function(e,t){return Object(g.jsx)(o.b,{to:"/notes/".concat(t.id),children:t.content})}}];return Object(g.jsxs)("div",{children:[s&&Object(g.jsx)(I,{ref:u,buttonLabel:Object(g.jsxs)("span",{children:[Object(g.jsx)(N.a,{}),Object(g.jsx)("span",{children:"new note"})]}),children:Object(g.jsx)(L,{createNote:p})}),Object(g.jsx)(k.a,{style:{margin:"10px 0"},onClick:n,children:t?"show important":"show all"}),Object(g.jsx)(w.a,{rowKey:"id",columns:h,dataSource:a,ren:!0})]})}),P={login:function(){var e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",{username:t,password:n}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},z=function(e){var t=e.username,n=e.password;return function(){var e=Object(j.a)(l.a.mark((function e(r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="loginMessageKey",A.b.loading({content:"\u767b\u9646\u4e2d...",key:c}),e.prev=2,e.next=5,P.login(t,n);case 5:a=e.sent,A.b.success({content:"\u767b\u5f55\u6210\u529f",key:c}),localStorage.setItem("loggedNoteappUser",JSON.stringify(a)),m.setToken(a.token),r({type:"LOGIN",data:a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0,e.t0.response,"error---"),A.b.warning({content:"\u767b\u5f55\u5931\u8d25: ".concat(e.t0.response.data.error),key:c});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},F=function(e){var t=e.user,n=Object(i.b)();return Object(g.jsx)("div",{children:Object(g.jsxs)("p",{children:[Object(g.jsx)("span",{children:t.name}),Object(g.jsx)("span",{children:"logged in"}),Object(g.jsx)(k.a,{type:"link",onClick:function(){localStorage.setItem("loggedNoteappUser",""),m.setToken(null),n({type:"LOGOUT"})},children:"\u9000\u51fa"})]})})},K=n(279),M=n(276),_=function(e){var t=e.handleLogin,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),u=i[0],l=i[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Login"}),Object(g.jsxs)(M.a,{onFinish:function(){s(""),l(""),t({username:a,password:u})},children:[Object(g.jsx)(M.a.Item,{label:"Username",name:"username",children:Object(g.jsx)(C.a,{id:"username",type:"text",placeholder:"\u8bf7\u8f93\u5165username",name:"username",value:a,onChange:function(e){return s(e.target.value)}})}),Object(g.jsx)(M.a.Item,{label:"Password",name:"password",children:Object(g.jsx)(C.a,{id:"password",type:"text",placeholder:"\u8bf7\u8f93\u5165password",name:"password",value:u,onChange:function(e){return l(e.target.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(k.a,{htmlType:"submit",children:"\u767b\u5f55"})})]})]})},R=function(){var e=Object(i.b)(),t=Object(h.g)(),n=function(){var n=Object(j.a)(l.a.mark((function n(r){var c,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r.username,a=r.password,n.next=3,e(z({username:c,password:a}));case 3:t.replace("/users");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(g.jsx)(I,{buttonLabel:Object(g.jsxs)("span",{children:[Object(g.jsx)(K.a,{}),Object(g.jsx)("span",{style:{marginLeft:8},children:"\u767b\u5f55"})]}),children:Object(g.jsx)(_,{handleLogin:n})})},J=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("h2",{children:"TKTL notes app"})})},W=function(){var e=Object(r.useState)(0),t=Object(d.a)(e,2),n=t[0],c=t[1];return{count:n,increase:function(){c(n+1)},decrease:function(){c(n-1)},zero:function(){c(0)}}},B=function(){var e=W(),t=e.count,n=e.increase,r=e.decrease,c=e.zero;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{children:["count: ",t]}),Object(g.jsx)(k.a,{onClick:n,children:"increase"}),Object(g.jsx)(k.a,{onClick:r,children:"decrease"}),Object(g.jsx)(k.a,{onClick:c,children:"zero"})]})},H=function(){var e=W(),t=W();return Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{children:["left count: ",e.count]}),Object(g.jsx)(k.a,{onClick:e.increase,children:"left increase"}),Object(g.jsx)("br",{}),Object(g.jsxs)("p",{children:["right count: ",t.count]}),Object(g.jsx)(k.a,{onClick:t.increase,children:"right increase"})]})},V=(n(271),b.a.Header),q=b.a.Content,Q=b.a.Footer;var X=function(){var e=Object(i.c)((function(e){return e})),t=e.notes,n=e.user,c=Object(i.b)(),a=Object(h.g)().location.pathname,s=Object(r.useState)(!0),u=Object(d.a)(s,2),O=u[0],f=u[1],x=Object(r.useState)(""),v=Object(d.a)(x,2),k=v[0],w=v[1],N=O?t:t.filter((function(e){return e.important}));N=[].concat(N).reverse();var T=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(G(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){w(a);var e=localStorage.getItem("loggedNoteappUser");if(e){var t=JSON.parse(e);c(function(e){return{type:"UPDATE",data:e}}(t)),m.setToken(t.token)}c(function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getNotes();case 2:n=e.sent,t({type:"INIT_NOTE",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),console.log(k,"currentKey"),Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)(b.a,{className:"layout",children:[Object(g.jsxs)(V,{children:[Object(g.jsx)("div",{className:"logo"}),Object(g.jsxs)(p.a,{theme:"dark",mode:"horizontal",selectedKeys:[k],onClick:function(e){return w(e.key)},children:[Object(g.jsx)(p.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/",children:"home"})},"/"),Object(g.jsx)(p.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/notes",children:"notes"})},"/notes"),Object(g.jsx)(p.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/users",children:"users"})},"/users"),Object(g.jsx)(p.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/count",children:"count"})},"/count"),Object(g.jsx)(p.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/count2",children:"count2"})},"/count2")]})]}),Object(g.jsx)(q,{style:{padding:"0 50px"},children:Object(g.jsx)("div",{className:"site-layout-content",children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(h.b,{path:"/count",children:Object(g.jsx)(B,{})}),Object(g.jsx)(h.b,{path:"/count2",children:Object(g.jsx)(H,{})}),Object(g.jsx)(h.b,{path:"/notes/:id",children:Object(g.jsx)(y,{})}),Object(g.jsx)(h.b,{path:"/notes",children:Object(g.jsx)(D,{showAll:O,handleToggleShowAll:function(){f(!O)},handleToggleImportant:T})}),Object(g.jsx)(h.b,{path:"/users",children:n?Object(g.jsx)(F,{user:n}):Object(g.jsx)(h.a,{to:"login"})}),Object(g.jsx)(h.b,{path:"/login",children:Object(g.jsx)(R,{})}),Object(g.jsx)(h.b,{path:"/",children:Object(g.jsx)(J,{})})]})})}),Object(g.jsx)(Q,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,280)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},Z=n(66),$=n(159),ee=n(160),te=n(164),ne=[{content:"reducer defines how redux store works",important:!0,id:1},{content:"state of store can contain any data",important:!1,id:2}],re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_NOTE":return t.data;case"NEW_NOTE":return[].concat(Object(te.a)(e),[t.data]);case"TOGGLE_IMPORTANCE":return t.data;default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;case"UPDATE":return t.data;default:return e}},ae=Object(Z.combineReducers)({notes:re,user:ce}),se=Object(Z.createStore)(ae,Object(ee.composeWithDevTools)(Object(Z.applyMiddleware)($.a)));s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(i.a,{store:se,children:Object(g.jsx)(o.a,{children:Object(g.jsx)(X,{})})})}),document.getElementById("root")),Y()}},[[272,1,2]]]);
//# sourceMappingURL=main.53fd2986.chunk.js.map