(this.webpackJsonpfullstackopen=this.webpackJsonpfullstackopen||[]).push([[13],{131:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(27),a=n.n(r),c=n(42),o=n(104),i=n(34),s={login:function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("/api/login",{username:t,password:n}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},u=n(77),l=function(){return{type:"LOGOUT"}},d=function(e){var t=e.username,n=e.password;return function(){var e=Object(c.a)(a.a.mark((function e(r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="loginMessageKey",i=o.b.loading({content:"\u767b\u9646\u4e2d...",key:c}),e.prev=2,e.next=5,s.login(t,n);case 5:l=e.sent,o.b.success({content:"\u767b\u5f55\u6210\u529f",key:c}),u.a.setToken(l),r({type:"LOGIN",data:l}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),i(),r({type:"LOGIN",data:null});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}},177:function(e,t,n){},179:function(e,t,n){},188:function(e,t,n){var r={"./counter":[89,9,6],"./counter/":[89,9,6],"./counter/index":[89,9,6],"./counter/index.jsx":[89,9,6],"./counter2":[90,9,7],"./counter2/":[90,9,7],"./counter2/index":[90,9,7],"./counter2/index.jsx":[90,9,7],"./home":[91,9,8],"./home/":[91,9,8],"./home/index":[91,9,8],"./home/index.jsx":[91,9,8],"./login":[94,9,0,1,2,5],"./login/":[94,9,0,1,2,5],"./login/LoginForm":[149,9,0,1,2,12],"./login/LoginForm.jsx":[149,9,0,1,2,12],"./login/index":[94,9,0,1,2,5],"./login/index.jsx":[94,9,0,1,2,5],"./main":[43,9],"./main/":[43,9],"./main/index":[43,9],"./main/index.jsx":[43,9],"./note":[92,9,9],"./note/":[92,9,9],"./note/index":[92,9,9],"./note/index.jsx":[92,9,9],"./notes":[95,9,0,1,3,4],"./notes/":[95,9,0,1,3,4],"./notes/NoteForm":[150,9,0,11],"./notes/NoteForm.jsx":[150,9,0,11],"./notes/index":[95,9,0,1,3,4],"./notes/index.css":[195,7,16],"./notes/index.jsx":[95,9,0,1,3,4],"./users":[93,9,10],"./users/":[93,9,10],"./users/index":[93,9,10],"./users/index.jsx":[93,9,10]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(a,t[1])}))}a.keys=function(){return Object.keys(r)},a.id=188,e.exports=a},189:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(20),c=n.n(a),o=n(47),i=n(52),s=n(133),u=function(e){e&&e instanceof Function&&n.e(17).then(n.bind(null,305)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},l=n(18),d=n(104),j=n(43),p=(n(189),n(6));var h=function(){var e=Object(l.g)(),t=Object(o.c)((function(e){return e})).user;return Object(r.useEffect)((function(){if(!localStorage.getItem("loggedNoteappUser"))return e.replace("/login"),void d.b.warn("\u767b\u5f55\u4fe1\u606f\u5931\u6548\uff0c \u8bf7\u91cd\u91cd\u767b\u5f55")}),[]),Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.a,{from:"/",to:t?"/main/":"/login",exact:!0}),Object(p.jsx)(l.b,{path:"/main",component:j.default}),Object(p.jsx)(l.b,{path:"/login",exact:!0,component:Object(j.lazyComponent)("login")})]})},f=n(37),b=n(141),x=n(142),O=n(103),m=n(143),g=n.n(m),v=n(144),y=[],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_NOTE":return t.data;case"NEW_NOTE":return[].concat(Object(v.a)(e),[t.data]);case"TOGGLE_IMPORTANCE":return t.data;default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;case"UPDATE":return t.data;default:return e}},N={key:"root",storage:g.a,whitelist:["user"]},I=Object(f.combineReducers)({notes:k,user:w}),T=Object(O.a)(N,I),E=Object(f.createStore)(T,Object(x.composeWithDevTools)(Object(f.applyMiddleware)(b.a))),L=Object(O.b)(E);n(192);c.a.render(Object(p.jsx)(o.a,{store:E,children:Object(p.jsx)(s.a,{persistor:L,children:Object(p.jsx)(i.a,{children:Object(p.jsx)(h,{})})})}),document.getElementById("root")),u()},34:function(e,t,n){"use strict";var r=n(38),a=n(135),c=n.n(a),o=n(104),i=n(88),s=n.n(i),u=JSON.parse(localStorage.getItem("loggedNoteappUser")||"{}"),l=c.a.create({});l.interceptors.request.use((function(e){return s.a.start(),u&&u.token&&(e.headers=Object(r.a)(Object(r.a)({},e.headers),{},{Authorization:"bearer ".concat(u.token)})),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return s.a.done(),e}),(function(e){s.a.done();var t=e.response.status;switch(t){case 401:o.b.warn("Error code: ".concat(t))}return Promise.reject(e)})),t.a=l},43:function(e,t,n){"use strict";n.r(t),n.d(t,"lazyComponent",(function(){return E})),n.d(t,"routers",(function(){return L}));var r=n(0),a=n(18),c=n(134),o=n.n(c),i=n(73),s=n(200),u=n(197),l=n(196),d=n(78),j=n(201),p=n(202),h=n(52),f=n(47),b=n(77),x=n(131),O=n(38),m=n(34),g=(n(177),n(6)),v=function(e){var t=Object.assign({},e),n=Object(r.useState)({}),a=Object(i.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){m.a.get("/api/weather").then((function(e){if(e.data&&e.data.result){var t=e.data.result,n=t.city,r=t.realtime,a=r.info,c=r.direct;o((function(){return{city:n,info:a,direct:c}}))}}))}),[]),Object(g.jsxs)("div",Object(O.a)(Object(O.a)({},t),{},{className:"weather-container",children:[Object(g.jsx)("div",{children:c.city}),Object(g.jsx)("div",{children:c.info}),Object(g.jsx)("div",{children:c.direct})]}))},y=(n(179),s.a.Header),k=s.a.Sider,w=s.a.Content,N=function(e){var t=e.children,n=Object(f.b)(),c=Object(f.c)((function(e){return e})).user,o=Object(a.g)(),O=o.replace,m=o.location.pathname,N=Object(r.useState)(""),I=Object(i.a)(N,2),T=I[0],E=I[1];return Object(r.useEffect)((function(){var e=m;m.startsWith("/main/note")?e="/main/notes":"/main/"===m&&(e="/main/home"),E(e)}),[]),Object(g.jsxs)(s.a,{id:"components-layout-demo-custom-trigger",children:[Object(g.jsxs)(k,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:[Object(g.jsx)("div",{className:"logo"}),Object(g.jsx)(u.a,{theme:"dark",mode:"inline",selectedKeys:[T],onClick:function(e){return E(e.key)},children:L.map((function(e){return!e.hide&&Object(g.jsx)(u.a.Item,{icon:Object(g.jsx)(p.a,{}),children:Object(g.jsx)(h.b,{to:e.path,children:e.title})},e.path)}))})]}),Object(g.jsxs)(s.a,{className:"site-layout",style:{marginLeft:200},children:[Object(g.jsxs)(y,{className:"site-layout-header",children:[Object(g.jsx)(v,{style:{marginRight:20}}),Object(g.jsx)(l.a,{overlay:Object(g.jsxs)(u.a,{children:[Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(d.a,{type:"link",children:"\u5173\u4e8e\u6211"})},"0"),Object(g.jsx)(u.a.Divider,{}),Object(g.jsx)(u.a.Item,{children:Object(g.jsxs)(d.a,{type:"link",children:[Object(g.jsx)("span",{children:"\u5f53\u524d\u767b\u5f55\u4eba\uff1a"}),Object(g.jsx)("span",{children:c&&c.name})]})},"1"),Object(g.jsx)(u.a.Divider,{}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(d.a,{type:"link",onClick:function(){b.a.setToken(null),n(Object(x.b)()),O("/login")},children:"\u9000\u51fa"})},"2")]}),trigger:["click"],children:Object(g.jsx)(j.a,{style:{backgroundColor:"#87d068"},icon:Object(g.jsx)(p.a,{})})})]}),Object(g.jsx)(w,{className:"site-layout-content",style:{margin:"24px 16px",padding:24,minHeight:280},children:t})]})]})},I=n(198);var T=function(){return Object(g.jsx)(I.a,{})},E=function(e){return o()({loader:function(){return n(188)("./".concat(e))},loading:T})},L=[{path:"/main/home",title:"\u9996\u9875",exact:!0,component:E("home")},{path:"/main/counter",title:"\u8ba1\u6570\u9875",exact:!0,component:E("counter")},{path:"/main/counter2",title:"\u8ba1\u6570\u98752",exact:!0,component:E("counter2")},{path:"/main/note/:id",title:"\u7b14\u8bb0\u8be6\u60c5",exact:!0,hide:!0,component:E("note")},{path:"/main/notes",title:"\u7b14\u8bb0\u5217\u8868",component:E("notes")},{path:"/main/users",title:"\u7528\u6237",component:E("users")},{path:"/main/login",title:"\u767b\u5f55",exact:!0,hide:!0,component:E("login")},{path:"/main/",redirect:"/main/home",isRedirect:!0,exact:!0,hide:!0}];t.default=function(){return Object(g.jsx)(N,{children:Object(g.jsx)(a.d,{children:L.map((function(e){return e.isRedirect?Object(g.jsx)(a.a,{to:e.redirect,exact:!0},e.path):Object(g.jsx)(a.b,{exact:e.exact,path:e.path,component:e.component},e.path)}))})})}},77:function(e,t,n){"use strict";var r=n(27),a=n.n(r),c=n(42),o=n(38),i=n(34),s="/api/notes",u=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(s).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post(s,t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.put("".concat(s,"/").concat(t),n).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.a={getNotes:u,createNote:l,updateNote:d,setToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(i.a.defaults.headers=Object(o.a)(Object(o.a)({},i.a.defaults.headers),{},{Authorization:"bearer ".concat(e.token)}),localStorage.setItem("loggedNoteappUser",JSON.stringify(e))):(i.a.defaults.headers=Object(o.a)(Object(o.a)({},i.a.defaults.headers),{},{Authorization:""}),localStorage.setItem("loggedNoteappUser",""))}}}},[[193,14,15]]]);
//# sourceMappingURL=main.422f15ce.chunk.js.map