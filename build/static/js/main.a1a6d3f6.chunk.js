(this.webpackJsonpfullstackopen=this.webpackJsonpfullstackopen||[]).push([[0],{178:function(e,t,n){},198:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(26),s=n.n(a),o=n(45),i=n(35),u=(n(178),n(23)),j=n.n(u),l=n(28),b=n(39),d=n(274),O=n(72),h=n(25),p=n(86),x=n.n(p),f="/api/notes",v=null,m={getNotes:function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get(f).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNote:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,x.a.post(f,t,n).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNote:function(){var e=Object(l.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.put("".concat(f,"/").concat(t),n).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setToken:function(e){v="bearer ".concat(e)}},g=n(7),y=function(){Object(i.c)((function(e){return e})).notes;var e=Object(h.h)().id;return Object(g.jsxs)("div",{children:["note id: ",e]})},k=n(55),w=n(275),N=n(278),T=Object(c.forwardRef)((function(e,t){var n=e.buttonLabel,r=e.children,a=Object(c.useState)(!1),s=Object(b.a)(a,2),o=s[0],i=s[1],u={display:o?"none":""},j={display:o?"":"none"},l=function(){i(!o)};return Object(c.useImperativeHandle)(t,(function(){return{toggleVisibility:l}})),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:u,children:Object(g.jsx)(k.a,{onClick:l,children:n})}),Object(g.jsxs)("div",{style:j,children:[r,Object(g.jsx)(k.a,{style:{marginTop:10},onClick:l,children:"cancel"})]})]})}));T.displayName="Toggleable";var I=T,C=n(277),S=n(168),L=function(e){var t=e.createNote,n=Object(c.useState)(""),r=Object(b.a)(n,2),a=r[0],s=r[1];return Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault(),t({content:a,important:!0}),s("")},children:Object(g.jsx)(C.a,{style:{maxWidth:420},size:"middle",placeholder:"\u8bf7\u8f93\u5165",value:a,addonAfter:Object(g.jsx)(k.a,{style:{height:30},htmlType:"submit",type:"text",icon:Object(g.jsx)(S.a,{}),children:"\u63d0\u4ea4"}),onChange:function(e){s(e.target.value)}})})},E=(n(129),n(163)),U=function(e,t){return function(){var n=Object(l.a)(j.a.mark((function n(c){var r,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="addNoteMessageKey",E.b.loading({content:"\u6dfb\u52a0\u4e2d...",key:r}),n.prev=2,n.next=5,m.createNote(e);case 5:a=n.sent,E.b.success({content:"\u6dfb\u52a0\u6210\u529f",key:r}),c({type:"NEW_NOTE",data:a}),t.current.toggleVisibility(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),E.b.error({content:"\u6dfb\u52a0\u5931\u8d25",key:r});case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},A=(n(198),function(){var e=Object(i.c)((function(e){return e})),t=e.notes,n=e.user,r=Object(c.useRef)(),a=Object(i.b)(),s=Object(c.useState)(!0),u=Object(b.a)(s,2),d=u[0],O=u[1],h=d?t:t.filter((function(e){return e.important}));h=[].concat(h).reverse();var p=function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(U(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=[{title:"id",dataIndex:"id",key:"id"},{title:"content",dataIndex:"content",key:"content",render:function(e,t){return Object(g.jsx)(o.b,{to:"/notes/".concat(t.id),children:t.content})}}];return Object(g.jsxs)("div",{children:[n&&Object(g.jsx)(I,{ref:r,buttonLabel:Object(g.jsxs)("span",{children:[Object(g.jsx)(N.a,{}),Object(g.jsx)("span",{children:"new note"})]}),children:Object(g.jsx)(L,{createNote:p})}),Object(g.jsx)(k.a,{style:{margin:"10px 0"},onClick:function(){O(!d)},children:d?"show important":"show all"}),Object(g.jsx)(w.a,{rowKey:"id",columns:x,dataSource:h})]})}),D={login:function(){var e=Object(l.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/login",{username:t,password:n}).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},z=function(e){var t=e.username,n=e.password;return function(){var e=Object(l.a)(j.a.mark((function e(c){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="loginMessageKey",E.b.loading({content:"\u767b\u9646\u4e2d...",key:r}),e.prev=2,e.next=5,D.login(t,n);case 5:a=e.sent,E.b.success({content:"\u767b\u5f55\u6210\u529f",key:r}),localStorage.setItem("loggedNoteappUser",JSON.stringify(a)),m.setToken(a.token),c({type:"LOGIN",data:a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0,e.t0.response,"error---"),E.b.warning({content:"\u767b\u5f55\u5931\u8d25: ".concat(e.t0.response.data.error),key:r});case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},F=function(e){var t=e.user,n=Object(i.b)();return Object(g.jsx)("div",{children:Object(g.jsxs)("p",{children:[Object(g.jsx)("span",{children:t.name}),Object(g.jsx)("span",{children:"logged in"}),Object(g.jsx)(k.a,{type:"link",onClick:function(){localStorage.setItem("loggedNoteappUser",""),m.setToken(null),n({type:"LOGOUT"})},children:"\u9000\u51fa"})]})})},G=n(279),K=n(276),P=function(e){var t=e.handleLogin,n=Object(c.useState)(""),r=Object(b.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(""),i=Object(b.a)(o,2),u=i[0],j=i[1];return Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{children:"Login"}),Object(g.jsxs)(K.a,{onFinish:function(){s(""),j(""),t({username:a,password:u})},children:[Object(g.jsx)(K.a.Item,{label:"Username",name:"username",children:Object(g.jsx)(C.a,{id:"username",type:"text",placeholder:"\u8bf7\u8f93\u5165username",name:"username",value:a,onChange:function(e){return s(e.target.value)}})}),Object(g.jsx)(K.a.Item,{label:"Password",name:"password",children:Object(g.jsx)(C.a,{id:"password",type:"text",placeholder:"\u8bf7\u8f93\u5165password",name:"password",value:u,onChange:function(e){return j(e.target.value)}})}),Object(g.jsx)("div",{children:Object(g.jsx)(k.a,{htmlType:"submit",children:"\u767b\u5f55"})})]})]})},M=function(){var e=Object(i.b)(),t=Object(h.g)(),n=function(){var n=Object(l.a)(j.a.mark((function n(c){var r,a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=c.username,a=c.password,n.next=3,e(z({username:r,password:a}));case 3:t.replace("/users");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(g.jsx)(I,{buttonLabel:Object(g.jsxs)("span",{children:[Object(g.jsx)(G.a,{}),Object(g.jsx)("span",{style:{marginLeft:8},children:"\u767b\u5f55"})]}),children:Object(g.jsx)(P,{handleLogin:n})})},_=function(){return Object(g.jsx)("div",{children:Object(g.jsx)("h2",{children:"TKTL notes app"})})},J=function(){var e=Object(c.useState)(0),t=Object(b.a)(e,2),n=t[0],r=t[1];return{count:n,increase:function(){r(n+1)},decrease:function(){r(n-1)},zero:function(){r(0)}}},R=function(){var e=J(),t=e.count,n=e.increase,c=e.decrease,r=e.zero;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{children:["count: ",t]}),Object(g.jsx)(k.a,{onClick:n,children:"increase"}),Object(g.jsx)(k.a,{onClick:c,children:"decrease"}),Object(g.jsx)(k.a,{onClick:r,children:"zero"})]})},W=function(){var e=J(),t=J();return Object(g.jsxs)("div",{children:[Object(g.jsxs)("p",{children:["left count: ",e.count]}),Object(g.jsx)(k.a,{onClick:e.increase,children:"left increase"}),Object(g.jsx)("br",{}),Object(g.jsxs)("p",{children:["right count: ",t.count]}),Object(g.jsx)(k.a,{onClick:t.increase,children:"right increase"})]})},B=(n(271),d.a.Header),H=d.a.Content,V=d.a.Footer;var q=function(){var e=Object(i.c)((function(e){return e})).user,t=Object(i.b)(),n=Object(h.g)().location.pathname,r=Object(c.useState)(""),a=Object(b.a)(r,2),s=a[0],u=a[1];return Object(c.useEffect)((function(){u(n);var e=localStorage.getItem("loggedNoteappUser");if(e){var c=JSON.parse(e);t(function(e){return{type:"UPDATE",data:e}}(c)),m.setToken(c.token)}t(function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getNotes();case 2:n=e.sent,t({type:"INIT_NOTE",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),console.log(s,"currentKey"),Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)(d.a,{className:"layout",children:[Object(g.jsxs)(B,{children:[Object(g.jsx)("div",{className:"logo"}),Object(g.jsxs)(O.a,{theme:"dark",mode:"horizontal",selectedKeys:[s],onClick:function(e){return u(e.key)},children:[Object(g.jsx)(O.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/",children:"home"})},"/"),Object(g.jsx)(O.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/notes",children:"notes"})},"/notes"),Object(g.jsx)(O.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/users",children:"users"})},"/users"),Object(g.jsx)(O.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/count",children:"count"})},"/count"),Object(g.jsx)(O.a.Item,{children:Object(g.jsx)(o.b,{className:"block",to:"/count2",children:"count2"})},"/count2")]})]}),Object(g.jsx)(H,{style:{padding:"0 50px"},children:Object(g.jsx)("div",{className:"site-layout-content",children:Object(g.jsxs)(h.d,{children:[Object(g.jsx)(h.b,{path:"/count",children:Object(g.jsx)(R,{})}),Object(g.jsx)(h.b,{path:"/count2",children:Object(g.jsx)(W,{})}),Object(g.jsx)(h.b,{path:"/notes/:id",children:Object(g.jsx)(y,{})}),Object(g.jsx)(h.b,{path:"/notes",children:Object(g.jsx)(A,{})}),Object(g.jsx)(h.b,{path:"/users",children:e?Object(g.jsx)(F,{user:e}):Object(g.jsx)(h.a,{to:"login"})}),Object(g.jsx)(h.b,{path:"/login",children:Object(g.jsx)(M,{})}),Object(g.jsx)(h.b,{path:"/",children:Object(g.jsx)(_,{})})]})})}),Object(g.jsx)(V,{style:{textAlign:"center"},children:"Ant Design \xa92018 Created by Ant UED"})]})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,280)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},X=n(66),Y=n(159),Z=n(160),$=n(164),ee=[],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_NOTE":return t.data;case"NEW_NOTE":return[].concat(Object($.a)(e),[t.data]);case"TOGGLE_IMPORTANCE":return t.data;default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;case"UPDATE":return t.data;default:return e}},ce=Object(X.combineReducers)({notes:te,user:ne}),re=Object(X.createStore)(ce,Object(Z.composeWithDevTools)(Object(X.applyMiddleware)(Y.a)));s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(i.a,{store:re,children:Object(g.jsx)(o.a,{children:Object(g.jsx)(q,{})})})}),document.getElementById("root")),Q()}},[[272,1,2]]]);
//# sourceMappingURL=main.a1a6d3f6.chunk.js.map